<div class="row">
  <h3 class="page-header">Edit Article</h3>
</div>

<div class="row">
  <div class="col-md-12">

    <form (submit)="articleSubmit()">

      <div class="form-group">
        <label>Title</label>
        <input type="text" [(ngModel)]="title" name="title" class="form-control"(ngModelChange)="updateArticle()">
      </div>

      <div class="form-group">
          <label>Thumbnail Image</label>
          <input type="file" class="form-control" name="file" ng2FileSelect [uploader]="uploader"/>
          <button type="button" (click)="this.uploadImage()">Upload Image</button>
      </div>

      <div *ngIf="this.article?.thumbnailPath" class="thumbnail">
        <label>Current Thumbnail</label>
        <img src="{{thumbnailPath}}">
      </div>

      <div class="form-group">
        <label>Article Preview</label>
        <div [froalaEditor]='options2' [(froalaModel)]="previewContent"></div>
      </div>

      <div class="form-group">
        <label>Article Body</label>
        <div [froalaEditor]='options' [(froalaModel)]="editorContent"></div>
      </div>

      <div *ngIf="(this.article?.status == 'review' || this.article?.status == 'unpublished') && (this.rolesService.checkRole('editor') || this.rolesService.checkRole('admin'))" class="form-group">
        <label>Publication Date</label>
        <dp-date-picker name="publish_on" [(ngModel)]="this.publish_on" (ngModelChange)="updateArticle()"></dp-date-picker>
      </div>

      <div *ngIf="(this.article?.status == 'review' || this.article?.status == 'unpublished' || this.article?.status == 'published') && (this.rolesService.checkRole('editor') || this.rolesService.checkRole('admin'))" class="form-group">
        <label>Unpublish Date</label>
        <dp-date-picker name="unpublish_on" [(ngModel)]="this.unpublish_on" (ngModelChange)="updateArticle()"></dp-date-picker>
      </div>


      <button type="button" class="btn btn-primary" (click)="openWindow(id)">Preview Article</button>
      <button type="button" class="btn btn-primary" (click)="updateArticle()">Save Article</button>
      <input *ngIf="this.article?.status == 'draft'"  type="submit" class="btn btn-primary" value="Submit Article for Review">
      <button type="button" *ngIf="(this.article?.status == 'review' || this.article?.status == 'unpublished') && (this.rolesService.checkRole('editor') || this.rolesService.checkRole('admin'))" (click)="publishArticle()" class="btn btn-primary">Publish Article</button>
      <button type="button" *ngIf="(this.article?.status == 'published') && (this.rolesService.checkRole('editor') || this.rolesService.checkRole('admin'))" (click)="unpublishArticle()" class="btn btn-primary">Unpublish Article</button>
    </form>

  </div>


</div>
